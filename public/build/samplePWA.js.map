{"version":3,"file":"samplePWA.js","sources":["../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../src/utils/index.js","../../src/components/SamplePWA.js","../../src/components/Header.js","../../src/main.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export function $qs(selector) {\r\n    return document.querySelector(selector);\r\n}\r\n\r\nexport function $qsa(selector) {\r\n    return document.querySelectorAll(selector);\r\n}\r\n\r\nexport class DOM {\r\n    constructor() {\r\n        throw new Error(\"[!] This is static class. Creating instances is forbidden.\");\r\n    }\r\n\r\n    static createElement(tagName, {attrs, text, callback, parent}) {\r\n        const element = document.createElement(`${tagName}`);\r\n\r\n        if (attrs) {\r\n            DOM.insertAttributes(element, attrs);\r\n        }\r\n\r\n        if (callback) {\r\n            callback(element);\r\n        }\r\n\r\n        if (text) {\r\n            element.innerHTML = text;\r\n        }\r\n\r\n        if (parent instanceof HTMLElement) {\r\n            parent.appendChild(element);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    static insertAttributes(element, attrs) {\r\n        if (element instanceof HTMLElement) {\r\n            Object.keys(attrs).forEach((prop) => {\r\n                element.setAttribute(prop, attrs[prop]);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport function applyStyle(target, styles) {\r\n    for (let value in styles) {\r\n        target.style[value] = styles[value];\r\n    }\r\n\r\n}","import {DOM} from \"../utils\";\r\nimport \"../style/style.scss\";\r\n\r\nexport default class SamplePWA {\r\n    constructor({target}) {\r\n        this.target = target;\r\n        this.dom = {\r\n            items: []\r\n        };\r\n        this.isObserver = 'IntersectionObserver' in window;\r\n        if (this.isObserver) {\r\n            this.observer = new IntersectionObserver((items) => {\r\n                items.forEach((item) => {\r\n                    if (item.isIntersecting) {\r\n                        this.loadImages(item.target);\r\n                        this.observer.unobserve(item.target);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        this.registerServiceWorker();\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        this.dom.listBox = DOM.createElement('div', {\r\n            attrs: {\r\n                class: \"listBox\"\r\n            },\r\n            parent: this.target\r\n        });\r\n        this.appendList();\r\n\r\n    }\r\n\r\n    appendList() {\r\n        this.dom.itemList = DOM.createElement('ul', {\r\n            attrs: {\r\n                class: \"itemList\"\r\n            },\r\n            parent: this.dom.listBox\r\n        });\r\n\r\n        for (let i = 0; i < listData.list.length; i++) {\r\n            this.dom.items[i] = DOM.createElement('li', {\r\n                attrs: {\r\n                    class: \"listItem\",\r\n                },\r\n                parent: this.dom.itemList\r\n            });\r\n\r\n            const img = DOM.createElement('img', {\r\n                attrs: {\r\n                    // class: \"listItem\",\r\n                    src: \"./build/assets/impPlaceholder.png\",\r\n                    'data-src': listData.list[i].IMAGE_FILE,\r\n                    alt: \"\"\r\n                },\r\n                parent: this.dom.items[i]\r\n            });\r\n\r\n            const textBox = DOM.createElement('div', {\r\n                attrs: {\r\n                    class: \"textBox\",\r\n                },\r\n                text: `<h3>${listData.list[i].TITLE}</h3><span>${listData.list[i].CATEGORY}</span>`,\r\n                parent: this.dom.items[i]\r\n            });\r\n\r\n            if (this.isObserver) {\r\n                this.observer.observe(img);\r\n            } else {\r\n                this.loadImages(img);\r\n            }\r\n        }\r\n    }\r\n\r\n    registerServiceWorker() {\r\n        // Registering Service Worker\r\n        if ('serviceWorker' in navigator) {\r\n            navigator.serviceWorker.register('./serviceWorker.js');\r\n        }\r\n    }\r\n\r\n    loadImages(image) {\r\n        image.setAttribute('src', image.getAttribute('data-src'));\r\n        image.onload = () => {\r\n            image.removeAttribute('data-src');\r\n        };\r\n    }\r\n\r\n\r\n\r\n\r\n}","import {DOM} from \"../utils\";\r\nexport default class Header {\r\n    constructor({target}) {\r\n        this.target = target;\r\n        this.dom = {};\r\n        this.init();\r\n        this.appendNotification();\r\n    }\r\n\r\n    init() {\r\n         this.dom.title = DOM.createElement('h2', {\r\n             attrs: {\r\n                 class: \"title\"\r\n             },\r\n             text: \"sample PWA\",\r\n             parent: this.target\r\n         });\r\n    }\r\n\r\n    appendNotification() {\r\n        this.dom.notification = DOM.createElement('button', {\r\n            attrs: {\r\n                class: \"notification\",\r\n            },\r\n            text: `랜덤 알림`,\r\n            parent: this.target\r\n        });\r\n\r\n        this.dom.notification.addEventListener('click', this.sendNotify.bind(this));\r\n    }\r\n\r\n    sendNotify() {\r\n        if (!(\"Notification\" in window)) {\r\n            alert(\"This browser does not support desktop notification\");\r\n        }\r\n        // Let's check whether notification permissions have already been granted\r\n        else if (Notification.permission === \"granted\") {\r\n            // If it's okay let's create a notification\r\n            this.randomNotification();\r\n        }\r\n        // Otherwise, we need to ask the user for permission\r\n        else if (Notification.permission !== 'denied') {\r\n            Notification.requestPermission((permission) => {\r\n                // If the user accepts, let's create a notification\r\n                if (permission === \"granted\") {\r\n                    this.randomNotification();\r\n                }\r\n            });\r\n        } else {\r\n            const randomItem = Math.floor(Math.random() * listData.list.length);\r\n            alert(listData.list[randomItem].TITLE);\r\n        }\r\n\r\n      /*  Notification.requestPermission((result) => {\r\n            if (result === 'granted') {\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    const randomItem = Math.floor(Math.random() * listData.list.length);\r\n                    registration.showNotification(listData.list[randomItem].CATEGORY, {\r\n                        body:listData.list[randomItem].TITLE,\r\n                        icon: listData.list[randomItem].IMAGE_FILE,\r\n                    });\r\n                });\r\n            }\r\n        });*/\r\n\r\n    }\r\n\r\n    randomNotification() {\r\n        const randomItem = Math.floor(Math.random() * listData.list.length);\r\n        const notifTitle = listData.list[randomItem].CATEGORY;\r\n        const notifBody = listData.list[randomItem].TITLE;\r\n        const notifImg = listData.list[randomItem].IMAGE_FILE;\r\n        const options = {\r\n            body: notifBody,\r\n            icon: notifImg,\r\n        };\r\n        new Notification(notifTitle, options);\r\n        // setTimeout(this.randomNotification, 5000);\r\n    }\r\n\r\n}","import SamplePWA from \"./components/SamplePWA\";\nimport {$qs, DOM} from \"./utils\";\nimport Header from \"./components/Header\";\n\n\nfunction runSampleApp() {\n    const header = new Header({\n        target: $qs(\"header\")\n    });\n\n    const samplePWA = new SamplePWA({\n        target: $qs(\".content\")\n    });\n}\n\nrunSampleApp();"],"names":["$qs","selector","document","querySelector","DOM","Error","tagName","attrs","text","callback","parent","element","createElement","insertAttributes","innerHTML","HTMLElement","appendChild","Object","keys","forEach","prop","setAttribute","SamplePWA","target","dom","items","isObserver","window","observer","IntersectionObserver","item","isIntersecting","loadImages","unobserve","registerServiceWorker","init","listBox","appendList","itemList","i","listData","list","length","img","src","IMAGE_FILE","alt","TITLE","CATEGORY","observe","navigator","serviceWorker","register","image","getAttribute","onload","removeAttribute","Header","appendNotification","title","notification","addEventListener","sendNotify","bind","alert","Notification","permission","randomNotification","requestPermission","randomItem","Math","floor","random","notifTitle","notifBody","notifImg","options","body","icon","runSampleApp"],"mappings":"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"}