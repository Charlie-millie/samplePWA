{"version":3,"file":"samplePWA.js","sources":["../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../src/utils/index.js","../../src/components/SamplePWA.js","../../src/main.js","../../src/components/Header.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export function $qs(selector) {\r\n    return document.querySelector(selector);\r\n}\r\n\r\nexport function $qsa(selector) {\r\n    return document.querySelectorAll(selector);\r\n}\r\n\r\nexport class DOM {\r\n    constructor() {\r\n        throw new Error(\"[!] This is static class. Creating instances is forbidden.\");\r\n    }\r\n\r\n    static createElement(tagName, {attrs, text, callback, parent}) {\r\n        const element = document.createElement(`${tagName}`);\r\n\r\n        if (attrs) {\r\n            DOM.insertAttributes(element, attrs);\r\n        }\r\n\r\n        if (callback) {\r\n            callback(element);\r\n        }\r\n\r\n        if (text) {\r\n            element.innerHTML = text;\r\n        }\r\n\r\n        if (parent instanceof HTMLElement) {\r\n            parent.appendChild(element);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    static insertAttributes(element, attrs) {\r\n        if (element instanceof HTMLElement) {\r\n            Object.keys(attrs).forEach((prop) => {\r\n                element.setAttribute(prop, attrs[prop]);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport function applyStyle(target, styles) {\r\n    for (let value in styles) {\r\n        target.style[value] = styles[value];\r\n    }\r\n\r\n}","import {DOM} from \"../utils\";\r\nimport \"../style/style.scss\";\r\n\r\nexport default class SamplePWA {\r\n    constructor({target}) {\r\n        this.target = target;\r\n        this.dom = {\r\n            items: []\r\n        };\r\n        this.isObserver = 'IntersectionObserver' in window;\r\n        if (this.isObserver) {\r\n            this.observer = new IntersectionObserver((items) => {\r\n                items.forEach((item) => {\r\n                    if (item.isIntersecting) {\r\n                        this.loadImages(item.target);\r\n                        this.observer.unobserve(item.target);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        this.registerServiceWorker();\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        this.dom.listBox = DOM.createElement('div', {\r\n            attrs: {\r\n                class: \"listBox\"\r\n            },\r\n            parent: this.target\r\n        });\r\n        this.appendList();\r\n\r\n    }\r\n\r\n    appendList() {\r\n        this.dom.itemList = DOM.createElement('ul', {\r\n            attrs: {\r\n                class: \"itemList\"\r\n            },\r\n            parent: this.dom.listBox\r\n        });\r\n\r\n        for (let i = 0; i < listData.list.length; i++) {\r\n            this.dom.items[i] = DOM.createElement('li', {\r\n                attrs: {\r\n                    class: \"listItem\",\r\n                },\r\n                parent: this.dom.itemList\r\n            });\r\n\r\n            const img = DOM.createElement('img', {\r\n                attrs: {\r\n                    // class: \"listItem\",\r\n                    src: \"./build/assets/impPlaceholder.png\",\r\n                    'data-src': listData.list[i].IMAGE_FILE,\r\n                    alt: \"\"\r\n                },\r\n                parent: this.dom.items[i]\r\n            });\r\n\r\n            const textBox = DOM.createElement('div', {\r\n                attrs: {\r\n                    class: \"textBox\",\r\n                },\r\n                text: `<h3>${listData.list[i].TITLE}</h3><span>${listData.list[i].CATEGORY}</span>`,\r\n                parent: this.dom.items[i]\r\n            });\r\n\r\n            if (this.isObserver) {\r\n                this.observer.observe(img);\r\n            } else {\r\n                this.loadImages(img);\r\n            }\r\n        }\r\n    }\r\n\r\n    registerServiceWorker() {\r\n        // Registering Service Worker\r\n        if ('serviceWorker' in navigator) {\r\n            navigator.serviceWorker.register('./serviceWorker.js');\r\n        }\r\n    }\r\n\r\n    loadImages(image) {\r\n        image.setAttribute('src', image.getAttribute('data-src'));\r\n        image.onload = () => {\r\n            image.removeAttribute('data-src');\r\n        };\r\n    }\r\n\r\n\r\n\r\n\r\n}","import SamplePWA from \"./components/SamplePWA\";\nimport {$qs, DOM} from \"./utils\";\nimport Header from \"./components/Header\";\n\n\nfunction runSampleApp() {\n    const header = new Header({\n        target: $qs(\"header\")\n    });\n\n    const samplePWA = new SamplePWA({\n        target: $qs(\".content\")\n    });\n}\n\nrunSampleApp();","import {DOM} from \"../utils\";\r\nexport default class Header {\r\n    constructor({target}) {\r\n        this.target = target;\r\n        this.dom = {};\r\n        this.init();\r\n        this.appendNotification();\r\n    }\r\n\r\n    init() {\r\n         this.dom.title = DOM.createElement('h2', {\r\n             attrs: {\r\n                 class: \"title\"\r\n             },\r\n             text: \"sample PWA\",\r\n             parent: this.target\r\n         });\r\n    }\r\n\r\n    appendNotification() {\r\n        this.dom.notification = DOM.createElement('button', {\r\n            attrs: {\r\n                class: \"notification\",\r\n            },\r\n            text: `랜덤 알림`,\r\n            parent: this.target\r\n        });\r\n\r\n        this.dom.notification.addEventListener('click', () => {\r\n            Notification.requestPermission().then((result) => {\r\n                if (result === 'granted') {\r\n                    this.randomNotification();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    randomNotification() {\r\n        const randomItem = Math.floor(Math.random() * listData.list.length);\r\n        const notifTitle = listData.list[randomItem].CATEGORY;\r\n        const notifBody = listData.list[randomItem].TITLE;\r\n        const notifImg = listData.list[randomItem].IMAGE_FILE;\r\n        const options = {\r\n            body: notifBody,\r\n            icon: notifImg,\r\n        };\r\n        new Notification(notifTitle, options);\r\n        // setTimeout(this.randomNotification, 5000);\r\n    }\r\n\r\n}"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","$qs","selector","document","querySelector","DOM","Error","tagName","attrs","text","callback","parent","element","createElement","insertAttributes","innerHTML","HTMLElement","appendChild","keys","forEach","prop","setAttribute","SamplePWA","dom","items","isObserver","window","this","observer","IntersectionObserver","item","isIntersecting","_this","loadImages","unobserve","registerServiceWorker","init","listBox","appendList","itemList","listData","list","img","src","IMAGE_FILE","alt","TITLE","CATEGORY","observe","navigator","serviceWorker","register","image","getAttribute","onload","removeAttribute","appendNotification","title","notification","addEventListener","Notification","requestPermission","then","result","randomNotification","randomItem","Math","floor","random","notifTitle","notifBody","notifImg","body","icon"],"mappings":"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"}